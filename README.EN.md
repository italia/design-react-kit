# Design React Kit

[![Join channel #design-devel](https://img.shields.io/badge/Slack%20channel-%23design--devel-blue.svg)](https://developersitalia.slack.com/messages/C7VPAUVB3/)
[![Get an invitation for Slack](https://slack.developers.italia.it/badge.svg)](https://slack.developers.italia.it/)

*Read this in other languages: [Italiano](README.md).*

*Default branch is now `next`, in order to host development and bring stable components with the following features:*
- *Storybook updated to v5.0.0*
- *Bootstrap Italia dependency updated to stable version v1.2.2*

`next` branch preview is on Netlify here: https://kind-ramanujan-f0d53e.netlify.com/

## Intro

**Design React kit** is a set of React components that implements [Bootstrap Italia](https://italia.github.io/bootstrap-italia/) and [Design UI Kit](https://github.com/italia/design-ui-kit) styling, as [shown on InVision](https://invis.io/TWMUZS6VFP5).

Components are showcased with [Storybook](https://storybook.js.org/).

Public version of Storybook (built from `master` branch) is available [here](https://italia.github.io/design-react-kit).

## Table of contents

<!-- START TOC generated by doctoc please keep a comment here to allow automatic updating -->
<!-- DO NOT MODIFY THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

- [Requirements](#requirements)
- [Getting Started](#getting-started)
- [How to create new components](#how-to-create-new-components)
  - [Storybook](#storybook)
- [Publishing](#publishing)
  - [Package](#package)
    - [Peer dependencies](#peer-dependencies)
    - [CSS Styles](#css-styles)
    - [Preprocessors](#preprocessors)
- [Continuous integration](#continuous-integration)
  - [`build` job](#build-job)
  - [`deploy-github-pages` job](#deploy-github-pages-job)
  - [`npm-publish` job](#npm-publish-job)

<!-- END doctoc generated TOC please keep the comment here to allow automatic updating -->

### Requirements

* NodeJS
* npm@5+

## Getting started

Clone the repo and run `npm run storybook` to start the development server.
A script takes care of running the `npm install` command needed to install dependencies.

Storybook will therefore be available at http://localhost:6006

![storybook](/doc/storybook.png?raw=true)

Public version of the Storybook is available [here](https://italia.github.io/design-react-kit).

## How to create new components

This section explains how to create new components in the repository.
All components reside in the `components` directory: each component is a folder with all that is needed to make it work. *Storybook* stories are instead under `stories`.

i.e. the `Button` component is shown below the `src/components/Button` path and its structure is as follows:

```
src
    └── components
        └── Button
            ├── Button.js
stories
    └── Button
        ├── Button.stories.js
```

Some basic rules for structuring the components:

* JS file component files use JSX syntax.
* The `.stories.js` files only restore the relative component only.

Once you have created a new component, with its history, starting *Storybook* will be able to check that everything works as it should.

### Storybook

Storybook has been enriched with some `addons` that make it more talented. Check dependencies on the `package.json` file for details.

## Publishing

A command is available to reach a static version of the Storybook catalog as it can be deployed without using a webserver.

```sh
$ npm run storybook: build
```

Static pages obtained from the compilation process generate under the `storybook-static` directory.

### Package

To use Design React as a dependency in an app you can install it from [npm](https://www.npmjs.com/~italia):

```sh
$ npm install design-react-kit
```

So it imports and uses the component:

```jsx
import React from 'react';
import { Alert } from "design-react-kit";

const Example = () => {
  return (
    <Alert>
        Questo è un alert
    </Alert>
  );
};
```

#### Peer dependencies

The library does not include `react` and `react-dom`, avoiding versions clashing and increasing the size of the bundle.
For this reason, for local development it will be necessary to manually install dependencies.

The command to be executed is
```sh
$ npm run install-dependencies
```
or alternatively manually
```sh
$ npm install react react-dom
```

#### CSS styles

The library is composed of a part of the states, inherited from the [bootstrap-italia](https://italia.github.io/bootstrap-italia/) package, that can be imported and installed with the following:

```sh
$ npm install bootstrap-italia
```

A second part of the package, and its actions, are directly imported from the same CSS generated:

```js
import "bootstrap-italia/dist/css/bootstrap-italia.min.css";
```

#### Preprocessors

Having the preprocessor [SASS](https://sass-lang.com/) available, it will be possible to integrate (and customize) the sources of the same:

```scss
@import "bootstrap-italia/src/scss/bootstrap-italia.scss";
```

## Continuous Integration

An instance of CircleCI is available and it is configured to build the repository every time the `master` branch is updated.
The Storybook build is deployed on the `gh-pages` branch and is publicly available on [italia.github.io/design-react-kit](https://italia.github.io/design-react-kit).

### `build` job

It will take care of running `npm run build`, starting Rollup and integrating the latest changes made to the` master` and `tag` branches.

### `deploy-github-pages` job

It will run `npm run storybook:build` and `npm run storybook:deploy` commands to build and deploy the Storybook documentation on the GitHub Pages.

### `npm-publish` job

It will run the `npm publish` command necessary to update the package [npm](https://www.npmjs.com/~italia).
